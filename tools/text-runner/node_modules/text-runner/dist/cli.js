"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const cli_cursor_1 = __importDefault(require("cli-cursor"));
const end_child_processes_1 = require("end-child-processes");
const parse_cmdline_args_1 = require("./configuration/cli/parse-cmdline-args");
const printed_user_error_1 = require("./errors/printed-user-error");
const unprinted_user_error_1 = require("./errors/unprinted-user-error");
const print_user_error_1 = require("./helpers/print-user-error");
const text_runner_1 = require("./text-runner");
cli_cursor_1.default.hide();
async function main() {
    const cliArgs = parse_cmdline_args_1.parseCmdlineArgs(process.argv);
    const errors = await text_runner_1.textRunner(cliArgs);
    for (const err of errors) {
        if (err instanceof unprinted_user_error_1.UnprintedUserError) {
            print_user_error_1.printUserError(err);
        }
        else if (err instanceof printed_user_error_1.PrintedUserError) {
            // nothing to do
        }
        else {
            console.log(err.stack);
        }
    }
    await end_child_processes_1.endChildProcesses();
    process.exit(errors.length);
}
main();
//# sourceMappingURL=cli.js.map