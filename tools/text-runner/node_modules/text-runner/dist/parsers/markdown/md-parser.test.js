"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const assert_1 = require("assert");
const fs_extra_1 = __importDefault(require("fs-extra"));
const path_1 = __importDefault(require("path"));
const absolute_file_path_1 = require("../../filesystem/absolute-file-path");
const ast_node_1 = require("../standard-AST/ast-node");
const ast_node_list_1 = require("../standard-AST/ast-node-list");
const parse_markdown_files_1 = require("./parse-markdown-files");
suite("MdParser.parseFile()", function () {
    const sharedFixtureDir = path_1.default.join("src", "parsers", "fixtures");
    const specificFixtureDir = path_1.default.join("src", "parsers", "markdown", "fixtures");
    for (const fixtureDir of [sharedFixtureDir, specificFixtureDir]) {
        for (const testDirName of fs_extra_1.default.readdirSync(fixtureDir)) {
            const testDirPath = path_1.default.join(fixtureDir, testDirName);
            test(`parsing '${testDirName}'`, async function () {
                const expectedJSON = await fs_extra_1.default.readJSON(path_1.default.join(testDirPath, "result.json"));
                const expected = new ast_node_list_1.AstNodeList();
                for (const expectedNodeData of expectedJSON) {
                    expectedNodeData.file = expectedNodeData.file.replace("*", "md");
                    expected.push(ast_node_1.AstNode.scaffold(expectedNodeData));
                }
                const actual = await parse_markdown_files_1.parseMarkdownFiles([new absolute_file_path_1.AbsoluteFilePath(path_1.default.join(testDirPath, "input.md"))]);
                assert_1.strict.deepEqual(actual[0], expected);
            });
        }
    }
});
//# sourceMappingURL=md-parser.test.js.map