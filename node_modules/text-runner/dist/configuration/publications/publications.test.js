"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const chai_1 = require("chai");
const absolute_file_path_1 = require("../../filesystem/absolute-file-path");
const publications_1 = require("./publications");
suite("Publications.forFilePath()", function () {
    test("a publication matches the given filePath", function () {
        const publications = publications_1.Publications.fromJSON([
            {
                localPath: "foo",
                publicExtension: "",
                publicPath: ""
            },
            {
                localPath: "bar",
                publicExtension: "",
                publicPath: ""
            }
        ]);
        const filePath = new absolute_file_path_1.AbsoluteFilePath("bar");
        const publication = publications.forFilePath(filePath);
        chai_1.assert.isDefined(publication);
        // @ts-ignore: publication is not null here
        chai_1.assert.equal(publication.localPath, "/bar/");
    });
    test("no publication matches", function () {
        const publications = publications_1.Publications.fromJSON([
            {
                localPath: "foo",
                publicExtension: "",
                publicPath: ""
            }
        ]);
        const filePath = new absolute_file_path_1.AbsoluteFilePath("bar");
        const publication = publications.forFilePath(filePath);
        chai_1.assert.isUndefined(publication);
    });
});
suite("Publications.sortPathMappings()", function () {
    test("has publications", function () {
        const original = publications_1.Publications.fromJSON([
            {
                localPath: "/content/",
                publicExtension: "",
                publicPath: "/"
            },
            {
                localPath: "/content/posts",
                publicExtension: "html",
                publicPath: "/blog"
            }
        ]);
        const publication = original.sorted();
        const expected = publications_1.Publications.fromJSON([
            {
                localPath: "/content/posts",
                publicExtension: "html",
                publicPath: "/blog"
            },
            {
                localPath: "/content/",
                publicExtension: "",
                publicPath: "/"
            }
        ]);
        chai_1.assert.deepEqual(publication, expected);
    });
    test("no publications", function () {
        chai_1.assert.lengthOf(new publications_1.Publications().sort(), 0);
    });
});
//# sourceMappingURL=publications.test.js.map